---
title: Einf√ºhrung in den Strawberry Communication Standard
description: Dies sollte dir eine allgemeine Vorstellung davon geben, worum es bei dem Strawberry Communication Standard geht
---

# Was ist das?
Der Strawberry Communication Standard (Strawberry's Kommunikationsstandard) (*kurz stbm, **St**raw**b**erry Co**m**munication Standard*) ist ein Kommunikationstandard f√ºr unsere Projekte.
Das hei√üt das alle unsere Projekte, die was mit Nachrichten√ºbertragungen oder √§hnliches zu tun haben, dieses System nutzen.

Aktuell haben wir 2 Hauptversionen des Strawberry Communication Standards. 
Um das alte System vom neuen System zu unterscheiden zu k√∂nnen, f√ºhren wir das Strawberry Communication System ein (kurz stbm).
Dieses Kommunikationssystem bildet einen Standard f√ºr Strawberry Chat und m√∂glicherweise f√ºr andere Projekte von Strawberry Foundations.

<Warning>
    Aktuell planen wir eine Umbennenung der kurzen Version vom Strawberry Communication Standard.
    Die aktuelle kurze Version ist `stbm` (***St**raw**b**erry Co**m**munication Standard*).
    Wir planen dies zu `stbc` umzubennenen um m√∂glicherweise weniger Verwirrung zu verursachen
</Warning>


<CardGroup cols={1}>
  <Card title="Strawberry Communication Standard v1" icon="toilet-paper" iconType="duotone" color="#55d799">
    Version 1 `(stbmv1/stbcv1)` ist eine "Legacy" Version und erh√§lt keine Updates mehr.
    Diese Version sendete pure Python-Strings √ºber Sockets und der Client empf√§ngt diese ohne vieles entschl√ºsseln der Daten.
    Die Daten werden jediglich nur entkodiert.<br></br><br></br>

    <Accordion title="Hinweis" icon="info" iconType="duotone" color="#55d799">
        F√ºr diese Version bieten wir keinen weiteren Support an.
        Die letzte Strawberry Chat Version (v1.8.3) mit diesem Kommunikationssystem erschien am 10. Dezember 2023.
        Dies war die letzte Legacy Version von Strawberry Chat und wird mit der Ver√∂ffentlichung von v1.10 oder v1.11 keinen weiteren Support erhalten.
    </Accordion>
  </Card>

  <Card title="Strawberry Communication Standard v2" icon="satellite-dish" iconType="duotone" color="#55d799">
    Version 2 `(stbmv2/stbcv2)` ist eine neue, verbesserte Version unseres Kommunikationssystemes.
    Diese verwendet JSON, um Nachrichten √ºber den Benutzern zu √ºbertragen.
    Mit unserem neuen Kommunizierungsstandard k√∂nnen Nutzer nun ihre eigenen Message Builder erstellen und damit selber entscheiden wie eine Nachricht angezeigt sein soll,
    unabh√§ngig davon wie der Server eigentlich die Nachrichten gesendet h√§tte.<br></br><br></br>

    <Accordion title="Strawberry Communication Standard v2.1" icon="tower-cell" iconType="duotone" color="#55d799">
    Zus√§tzlich gibt es noch Version 2.1 `(stbmv2.1)` f√ºr Nachrichten-Proxying, diese Version ist aber aktuell nicht verf√ºgbar.
    </Accordion>
  </Card>

  <Card title="Strawberry Communication Standard v3" icon="right-left-large" iconType="duotone" color="#55d799">
    Version 3 `(stbcv3)` steht noch in Planung.
    Diese Version implementiert wahrscheinlich das senden von JSON-Daten auf beiden Seiten (Server & Client).
    Das bedeutet, dass der Client dann auch JSON senden muss. Aufgrund von aktuellen Performanceproblemen steht dies aber noch nicht fest und k√∂nnte daher sich noch √§ndern.
    Durch die Implementierung von JSON f√ºr den Client stehen viele neue M√∂glichkeiten offen. Dadurch kann der Client spezielle Daten am Server senden und dieser verarbeitet diese.
    So k√∂nnten Commands, die Client-spezifisch sind, am Server verarbeitet werden.
    
    Version 3 wird nicht vor 2024 erscheinen. Es k√∂nnte aber dazu kommen das wir einige Experimente durchf√ºhren um zu schauen ob das Performanceteschnisch probleme verursacht.
  </Card>
</CardGroup>


| Unterst√ºtzte Features  | stbmc1 | stbmc2 | stbmc2.1 | stbmc3 |
|------------------------|--------|--------|----------|--------|
| Python Strings¬π        | ‚úÖ    | ‚úÖ     | ‚úÖ      | ‚úÖ     |
| pure String Transfer¬≤  | ‚úÖ    | ‚ùå     | ‚úÖ      | ‚ùå     |
| JSON Server-to-Client¬≥ | ‚ùå    | ‚úÖ     | ‚úÖ      | ‚úÖ     |
| JSON Client-to-Server‚Å¥ | ‚ùå    | ‚ùå     | ‚ùå      | ‚úÖ     |


<AccordionGroup>
  <Accordion title="Python Strings¬π" icon="python" iconType="duotone" color="#55d799">
    Das Feature Python Strings¬π bedeutet so viel wie "Unterst√ºtzung f√ºr reine Python-Strings".
    Dies sollte in jedem Fall immer "Ja"/"‚úÖ" sein, andersfalls k√∂nnen keine Strings verwendet werden.

    Die Interne Bezeichnung f√ºr Python Strings lautet `ps_com` oder `feat@ps`
  </Accordion>

  <Accordion title="pure String Transfer¬≤" icon="arrow-right-arrow-left" iconType="duotone" color="#55d799">
    Das Feature "pure String Transfer" wird f√ºr die erste Version des Strawberry Communication Standards verwendet.
    Dieses Feature verwendet reine Python Strings zum austausch von Daten und Events.

    Die Interne Bezeichnung f√ºr pure String Transfer lautet `pST_com` oder `feat@pst`
  </Accordion>

  <Accordion title="JSON Server-to-Client¬≥" icon="satellite-dish" iconType="duotone" color="#55d799">
    Das JSON Feature Server-to-Client ist die Weiterentwicklung von pure String Transfer und bietet nun eine kompakte Datenstruktur an,
    um einfach Daten und Events am Client zu senden. So k√∂nnen auch "leise" Events im Hintergrund passieren

    Die Interne Bezeichnung f√ºr JSON Server-to-Client lautet `json_stc` oder `json@stc`
  </Accordion>

  <Accordion title="JSON Client-to-Server¬≥" icon="satellite" iconType="duotone" color="#55d799">
    Das JSON Feature Client-to-Server ist die Implementierung von JSON f√ºr den Server, sodass der Server nun JSON-Daten vom Client annimmt statt pure String Transfer¬≤ Daten.
    Die zweite Version des Strawberry Communication Standards verwendet von Client zum Server weiterhin pure String Transfer,
    w√§hrend die dritte Version vermutlich JSON Client-to-Server verwendet.

    Die Interne Bezeichnung f√ºr JSON Client-to-Server lautet `json_cts` oder `json@cts`
  </Accordion>
</AccordionGroup>


# Was? Wieso? Wie?
Du wunderst dich vielleicht und fragst dich was das √ºberhaupt ist? Naja, dies ist wie 2 Socket Instanzen miteinander Kommunizieren.
Dies wurde urspr√ºnglich f√ºr Strawberry Chat entwickelt um Daten zwischen Server und Client, wie zum Beispiel Nutzername, Badge und Nachrichten zu senden,
aber wir haben uns dazu entschieden, ein kleines Tutorial zu geben wie du dieses System auch in deinem Client implementieren kannst!

<Tip>JSON-Kommunikation (JSON-Communication) ist auch ein anderer Name f√ºr unser Strawberry Communication Standard v2 (`stbmv2`). [Hier](/german/stbchat/stbm) kannst du mehr dar√ºber erfahren</Tip>

# Die Idee
Das originale Konzept daf√ºr wurde auf unserem Projekteboard auf GitHub [GitHub](https://github.com/orgs/Strawberry-Foundations/projects/1?pane=issue&itemId=44311144) am 10. November 2023 gepostet.
Beachte das dies aktuell nur in Deutsch zur Verf√ºgung steht. 

# Beispielcode

<Info>Dies ist ein sehr einfaches Beispiel f√ºr JSON-Kommunikation welches in Strawberry Chat verwendet wird</Info>

<CodeGroup>

    ```json JSON
    {
        "message_type": "user_message", // Typ der Nachricht, meist user_message
        "username": "julian", // Der Nutzername sollte komplett kleingeschrieben werden und ohne Leerzeichen
        "nickname": "Julian The Great", // Der Nickname kann jede Art von UTF-8 Zeichen sowie Leerzeichen beinhalten
        "badge": "üëë", // Emoji
        "role_color": "\u001b[31m\u001b[1m", // Dieses verwendet ANSI Farben, das Beispiel hier zeigt ein Rot mit Bold
        "message": {
            "content": "Hello World!"
        }
    }
    ```

    ```python Python
    # Receive code of the client
    def receive(sock):
        while threadFlag:
            try:
                message = sock.recv(2048).decode('utf-8')

                try: message = conv_json_data(message)
                except: message = message

                if message:
                    try:
                        try: message_type = message["message_type"]
                        except: message_type = "unknown"

                        if message_type == "user_message":
                        username    = message["username"]
                        nickname    = message["nickname"]
                        badge       = badge_handler(message["badge"])
                        role_color  = message["role_color"]
                        message     = message["message"]["content"]

                        if nickname == username:
                            fmt = f"[{current_time()}] {role_color}{username}{badge}:{CRESET} {message}"
                        else:
                            fmt = f"[{current_time()}] {role_color}{nickname} (@{username.lower()}){badge}:{CRESET} {message}"

                        print(fmt)

                    else:
                        message     = message["message"]["content"]
                        print(f"[{current_time()}] {message}")

                except Exception as e:
                    time.sleep(0.05)
                    message         = message["message"]["content"]
                    print(f"[{current_time()}] {message}")

            else: break

        except Exception as e:
            if experimental_debug_mode: print(f"{Fore.RED + BOLD}{Str[lang]['ConnectionInterrupt']}{Fore.RESET + CRESET}")
    pass
    ```

</CodeGroup>

# Unterst√ºtzte Versionen in Strawberry Chat

<Warning>
    Dies gilt nur f√ºr Strawberry Chat, kein anderes Programm
</Warning>

Siehe Tabelle



|                     | v1.8.0 - v1.8.2 ![](https://img.shields.io/badge/Legacy-green) | v1.8.3 ![](https://img.shields.io/badge/Legacy-gray) | v1.9.0 ![](https://img.shields.io/badge/Stable-success) |
|---------------------|----------------------------------------------------------------|---------------------------------------------------------|--------------------------------------------------------|
| Standard `<=2.4.0`  | ‚úÖ                                                            | ‚úÖ                                                      | ‚ùå                                                    | 
| Standard `v2.5.0`   | ‚ùå                                                            | ‚ùå                                                      | ‚úÖ                                                    | 
| Standard `>=v2.5.1` | ‚úÖ (CM)                                                       | ‚úÖ (CM)                                                 | ‚úÖ (CM)                                               | 
| Lite `<=v1.0.1`     | ‚úÖ                                                            | ‚úÖ                                                      | ‚ùå                                                    | 
| Lite `>=v1.1.0`     | ‚ùå                                                            | ‚ùå                                                      | ‚úÖ                                                    | 
| Nano `<=v1.0.1`     | ‚úÖ                                                            | ‚úÖ                                                      | ‚ùå                                                    | 
| Nano `>=v1.1.0`     | ‚ùå                                                            | ‚ùå                                                      | ‚úÖ                                                    | 
| Berryjuice-pico     | ‚úÖ                                                            | ‚úÖ                                                      | ‚ùå                                                    | 

<Tip>
    ### Kompatiblit√§tsmodus (CM)
    Seit Client v2.5.1 haben wir ein Feature hinzugef√ºgt welches Nutzern erlaubt, sich mit alten Servern zu verbinden.
    Dies hei√üt Kompatiblit√§tsmodus. Um den Kompatiblit√§tsmodus zu aktivieren musst du entweder `compatibility_mode: true` zu deinem Legacy Servereintrag hinzuf√ºgen oder starte den Client mit dem `--compatibility-mode` Argument
</Tip>